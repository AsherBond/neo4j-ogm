= Changes

== 3.1.22

* [bug] Convert collection based parameters for filters individually. (#829)
* [bug]  Avoid early population of externally generated ID fields. (#831)
* [improvement] Update Neo4j 3.5 to 3.5.21.
* [improvement] Precompute hashCode of MappedRelationship. (#838)
* [improvement] Compile pattern in case-insensitive mode. (#840)
* [new-feature] Check for a read only query hint. (#839)

== 3.1.21

* [bug] Ensure accessibility of annotation values. (#827)
* [bug] Solve ambiguous class name collision. (#809)
* [improvement] Flush mapping context on potentially write queries, both custom and generic. (#818)
* [tests] Prove that nested adhoc mapping from maps work. (#814)

== 3.1.20

* Relationships incoming from an inheritance tree are not deleted. (#806)

== 3.1.19

* Fix return type for known entity classes in case of an empty result. (Backport of #748)

== 3.1.18

* Update Neo4j 3.5 to 3.5.16.
* IgnoreCase filter support for starts/ends with.

== 3.1.17

* Recursively traverse variable length relationship patterns. (#718)
* Do not rely on simple class names. (#726)
* Improve computation of id fields in ClassInfo. (#729)
* Add tests to ensure correct mapping of pattern comprehension based queries. (#737)
* Improve performance of fully qualified class name lookup. (#738)
* Fix optimistic locking for relationship entities. (#747)
* Use latest versions of HttpClient and Core. (#754)
* Select correct string converter. (#761)
* Explicitly use ISO based date- and timeformatters. (#768)

== 3.1.16

* Check for contradicting annotations before mapping possible related nodes. (#666)
* Ensure that id fields are mapped correctly during ad-hoc mapping. (#551)
* Fix lookup of inner, static classes. (#391)
* Fix inconsistent behavior when querying parent classes. (#670)
* Use all mapped labels when querying domain objects. (#651)
* Use fully qualified name to find class info. (#552)
* Update FastClasspathScanner to latest 2.x series for OGM 3.1. (#708)
* Make SingleUseEntityMapper aware of nested objects. (#551)
* Improve building of class hierarchies. (#704)
* Fix detection of generic 1:1 relationships. (#706)
* Fix deletion of bidirectional, undirected relationships. (#657)
* Optimize CypherContext::isAlreadyDeleted. (#668)

== 3.1.15

* Fix invalid conversion of native types on embedded inside maps with when the experimental option
  `org.neo4j.ogm.driver.ParameterConversionMode.CONFIG_PARAMETER_CONVERSION_MODE` introduced in 3.1.4 is set
  to `CONVERT_NON_NATIVE_ONLY` (#665)

== 3.1.14

* Fix inconsistent usage of optimistic locking properties.

== 3.1.13

* Correctly discover and handle typed and parameterized fields. (#656)
* Fix deletion of relationship entities with optimistic locking.
* Improve support for Kotlin data classes. (#653)

== 3.1.12

* Verify sort order. (#368)
* Make sure all kinds of enums are correctly identified. (#643)
* Store visited nodes under their native graph id if possible. (#640)
* Fix merging of collections. (#641)
* Use name() for enum keys in both writing and reading of dynamic properties. (#632)
* Deprecate constructor without native type checking. (#630)
* Fix concurrency problem in entity cache.

== 3.1.11

* Apply optimistic locking logic during merge, too. (#623)
* Turn off client side Cypher validation, request TX type as needed. (#627)
* Upgrade to Jackson 2.9.9. (#628)
* Upgrade Neo4j 3.5 to 3.5.6.

== 3.1.10

* Provide hooks to configure native Bolt driver logging.

== 3.1.9

* Fix determination of visited nodes. (#609)
* Prepare additionally loaded superclasses as well. (#619)
* Upgrade Neo4j 3.5 to 3.5.5.
* Upgrade Neo4j 3.4 to 3.4.13.
* Upgrade Neo4j 3.2 to 3.2.14.
* Remove temporary class.
* Upgrade docbook plugin to alpha10
* Upgrade Checkstyle Maven plugin.

== 3.1.8

* Fix bug in optimistic locking with Neo4j 3.5.3.
* Fix bug in transaction management and bookmark functionality.
* Support single uri in uris properties. #605
* Stabilize CypherModificationProvider for threading.

== 3.1.7
* Fix bug when index fields contain camelCase properties.
* Fix initialization of Cypher modification. #595

== 3.1.6

* Improve documentation of type conversions. #501
* Provide "neo4j.conf.location" in OGM configuration, pointing to a custom configuration file (url or classpath resource)
  that allows to configure the embedded Neo4j instance. #408
* Deprecate "neo4j.ha.properties.file" as configuration property of OGM. It will be removed in 3.2. To use an embedded
  HA instance, provide a neo4j.conf file through OGM property "neo4j.conf.location" specifying the DBMS mode "HA" like
  this: dbms.mode=HA.
* Fix update of labels depending on the session in which an entity was loaded. (#488)
* Allow configuration of embedded database through file specified in `ogm.properties` under `neo4j.conf.location`. (#408)
* Improve documentation of attribute conversions. (#501)
* Don't rely on system encoding.
* Constraint violations are now handled consistent across drivers. (#301)
* Deprecated `org.neo4j.ogm.session.Neo4jException`, will be removed in 3.2. (#319)
* Deprecated `org.neo4j.ogm.exception.core.NotFoundException`, will be removed in 3.2. (#319)
* Deprecated `org.neo4j.ogm.exception.core.ResultErrorsException`, will be removed in 3.2. (#319)
* Fixed detection of field types in concrete subclasses of generic base classes. (#492)
* Changes to dynamic properties (map attributes) are now correctly tracked. (#518)
* Fixed possible class cast exceptions while sending domain events for iterables. (#473)
* Fixed deletion of relationships with the same type between the same nodes. (#576)

== 3.1.5

* Fix loading by parent class / interface for custom id. (#554)
* Fix computation of keys for primaryIdToNativeId mapping.
* Fix usage of fixed variable name.
* Remove methods that had been scheduled for removal in 3.1.4.
* Remove dependency on commons-io.

== 3.1.4

* Don't treat Void and void as scalar result types and thus allowing Neo4j-OGM session to handle queries mapped to these
  types even if the query itself does return nodes or properties. #479
* Fix a bug during detection of interface-hierarchies that prohibited the use of generics as target attributes for start
  and end nodes of a relationship. #491
* Fix a bug during recognition of type variables in generic classes or interfaces used as target attributes for
  relationships. #528
* Improve logging of Cypher statements and their parameters: To have less clutter in the log, only log to DEBUG. If you
  rely on the old behavior, enable DEBUG log on the request type in question
  (org.neo4j.ogm.drivers.bolt.request.BoltRequest, org.neo4j.ogm.drivers.embedded.request.EmbeddedRequest or
   org.neo4j.ogm.drivers.http.request.HttpRequest). #530
* Introduce an experimental configuration option to use native types in parameter conversion
  for both Bolt- and Embedded-Transports.

== 3.1.3

* Improve determination of labels in class hierarchy scenarios. Labels are now computed according to docs, the names of
  abstract classes are now considered as labels as long as the class contributes to the index. If a hierarchy lead to a
  situation where multiple different labels can be applied, the topmost one is used. #437
* Don't run the auto index manager if auto index mode is NONE (prevents eagerly opening a session). #437
* Deprecate #getIndexes and #build in AutoIndexManager. #437
* Convert array correct in delete operations. #509
* Treat @PostLoad methods the same way as JSR-250 treats @PostConstruct. #516
* Recognize overwritten @PostLoad methods in a class hierarchy. #414, #516
* Deprecate default constructor and mutating put-method in ObjectAnnotations.
* Prevent possible accidental deletion of all nodes when no label can be determined.

== 3.1.2

* Improve documentation.
* Resurrected ServiceNotFoundException for SDN Kay compatibility.

== 3.1.1

* Fix determination of FieldInfo.
* Use type converters for scalar queries. #71
* Remove deprecated and unused ServiceNotFoundException.

== 3.1.1-RC1

* Upgrade FastClasspathScanner to latest version. #474
* SortOrder API polishing. #483
* Make SortOrder reusable. #486
* (Deeper) Nested properties filter support.
* Provide a case-insensitive equals comparison.
* NodeEntity label, Relationship and RelationshipEntity type can be set without attribute name in annotation. #377

== 3.1.0

* Manually assigned conversion annotations should support lenient mode. #424
* Improve setting of BooleanOperator parameter in Filter. #445
* Update Neo4j java driver version to 1.5.0
* Update Neo4j version to 3.3.1 in 3.3 profile
* Update Neo4j version to 3.4.0-alpha04 in 3.4 profile
* Report QueryStatistics correctly. #449
* Support for composite index, node key constraints, existence constraints #439
* Improve java 9 compatibility by adding an automatic module name #460
* Refactor transaction handling
* Add optimistic locking #450
* Add entity instantiation callback mechanism. #448
